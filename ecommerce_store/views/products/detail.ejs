<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= product.name %> - ShopHub</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container navbar-container">
      <a href="/products" class="navbar-brand">üõçÔ∏è ShopHub</a>
      <ul class="navbar-nav">
        <li><a href="/products" class="nav-link">Products</a></li>
        <li><a href="/cart" class="nav-link">üõí Cart</a></li>
        <li><a href="/orders" class="nav-link">Orders</a></li>
        <li><a href="/profile" class="nav-link">Profile</a></li>
        <li><a href="/auth/logout" class="nav-link">Logout</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div style="padding: var(--spacing-2xl) 0; background: var(--gray-50);">
    <div class="container container-lg">
      <!-- Breadcrumb -->
      <div class="mb-lg" style="display: flex; align-items: center; gap: var(--spacing-sm); font-size: 0.875rem;">
        <a href="/products" class="link">Products</a>
        <span style="color: var(--gray-400);">/</span>
        <a href="/products?filter.category=<%= product.category %>" class="link"><%= product.category %></a>
        <span style="color: var(--gray-400);">/</span>
        <span style="color: var(--gray-600);"><%= product.name %></span>
      </div>

      <!-- Product Detail Grid -->
      <div class="grid" style="grid-template-columns: 1fr 1fr; gap: var(--spacing-2xl); align-items: start;">
        <!-- Product Image -->
        <div class="card">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 500px; display: flex; align-items: center; justify-content: center; font-size: 8rem; position: relative;">
            <%= product.category === 'Electronics' ? 'üì±' : 
                product.category === 'Fashion' ? 'üëï' : 
                product.category === 'Home' ? 'üè†' : 
                product.category === 'Books' ? 'üìö' : 
                product.category === 'Sports' ? '‚öΩ' : 'üõçÔ∏è' %>
            
            <!-- Stock Badge -->
            <% if (product.stock === 0) { %>
              <span class="badge badge-error" style="position: absolute; top: var(--spacing-lg); right: var(--spacing-lg); font-size: 0.875rem;">
                Out of Stock
              </span>
            <% } else if (product.stock < 10) { %>
              <span class="badge badge-warning" style="position: absolute; top: var(--spacing-lg); right: var(--spacing-lg); font-size: 0.875rem;">
                Only <%= product.stock %> left
              </span>
            <% } %>

            <!-- In Cart Badge -->
            <% if (product.inCart) { %>
              <span class="badge badge-success" style="position: absolute; top: var(--spacing-lg); left: var(--spacing-lg); font-size: 0.875rem;">
                ‚úì In Cart
              </span>
            <% } %>
          </div>

          <!-- Thumbnail Gallery (Optional Enhancement) -->
          <div style="display: flex; gap: var(--spacing-sm); padding: var(--spacing-md); background: white;">
            <div style="width: 80px; height: 80px; background: var(--gray-200); border-radius: var(--radius-md); border: 2px solid var(--primary); display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer;">
              <%= product.category === 'Electronics' ? 'üì±' : 
                  product.category === 'Fashion' ? 'üëï' : 
                  product.category === 'Home' ? 'üè†' : 
                  product.category === 'Books' ? 'üìö' : 
                  product.category === 'Sports' ? '‚öΩ' : 'üõçÔ∏è' %>
            </div>
            <div style="width: 80px; height: 80px; background: var(--gray-100); border-radius: var(--radius-md); border: 2px solid var(--gray-300); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; opacity: 0.5; cursor: pointer;">
              üì∑
            </div>
            <div style="width: 80px; height: 80px; background: var(--gray-100); border-radius: var(--radius-md); border: 2px solid var(--gray-300); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; opacity: 0.5; cursor: pointer;">
              üì∑
            </div>
          </div>
        </div>

        <!-- Product Info -->
        <div>
          <!-- Category Badge -->
          <div style="margin-bottom: var(--spacing-md);">
            <span class="badge badge-primary">
              <%= product.category %>
            </span>
          </div>

          <!-- Product Name -->
          <h1 style="font-size: 2.5rem; margin-bottom: var(--spacing-md);">
            <%= product.name %>
          </h1>

          <!-- Price -->
          <div class="card" style="background: var(--gray-50); margin-bottom: var(--spacing-xl);">
            <div class="card-body">
              <div style="display: flex; align-items: baseline; gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
                <span style="font-size: 3rem; font-weight: 700; color: var(--primary);">
                  ‚Çπ<%= product.price.toLocaleString() %>
                </span>
              </div>
              <p style="color: var(--gray-600); font-size: 0.875rem; margin: 0;">
                Inclusive of all taxes
              </p>
            </div>
          </div>

          <!-- Stock Info -->
          <div style="display: flex; align-items: center; gap: var(--spacing-lg); margin-bottom: var(--spacing-xl); padding: var(--spacing-lg); background: white; border-radius: var(--radius-md); border: 1px solid var(--gray-200);">
            <div style="flex: 1;">
              <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: var(--spacing-xs);">
                Stock Available
              </div>
              <div style="font-size: 1.5rem; font-weight: 700; color: <%= product.stock === 0 ? 'var(--error)' : product.stock < 10 ? 'var(--warning)' : 'var(--success)' %>;">
                <%= product.stock === 0 ? 'Out of Stock' : product.stock + ' units' %>
              </div>
            </div>
            <% if (product.orderCount > 0) { %>
              <div style="flex: 1; border-left: 1px solid var(--gray-200); padding-left: var(--spacing-lg);">
                <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: var(--spacing-xs);">
                  Total Sold
                </div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">
                  <%= product.orderCount %>
                </div>
              </div>
            <% } %>
          </div>

          <!-- Add to Cart Section -->
          <% if (product.inCart) { %>
            <div class="alert alert-success" style="margin-bottom: var(--spacing-lg);">
              <span>‚úì</span>
              <div>
                <strong>Already in your cart</strong>
                <p style="margin: 0; font-size: 0.875rem;">Quantity: <%= product.cartQuantity %></p>
              </div>
            </div>

            <div style="display: flex; gap: var(--spacing-md);">
              <a href="/cart" class="btn btn-primary btn-lg" style="flex: 1;">
                üõí View Cart
              </a>
              <a href="/products" class="btn btn-secondary btn-lg" style="flex: 1;">
                ‚Üê Continue Shopping
              </a>
            </div>
          <% } else { %>
            <form method="POST" action="/products/<%= product.id %>/cart">
              <button 
                type="submit" 
                class="btn btn-primary btn-lg btn-block"
                <%= product.stock === 0 ? 'disabled' : '' %>
              >
                <% if (product.stock === 0) { %>
                  Out of Stock
                <% } else { %>
                  üõí Add to Cart
                <% } %>
              </button>
            </form>
          <% } %>

          <!-- Trust Badges -->
        </div>
      </div>

      <!-- Back Button -->
      <div class="mt-xl">
        <a href="/products" class="link" style="display: inline-flex; align-items: center; gap: var(--spacing-sm);">
          ‚Üê Back to Products
        </a>
      </div>
    </div>
  </div>

  <style>
    .tab-button {
      padding: var(--spacing-md) 0;
      background: transparent;
      border: none;
      border-bottom: 3px solid transparent;
      font-size: 1rem;
      font-weight: 600;
      color: var(--gray-600);
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .tab-button:hover {
      color: var(--primary);
    }

    .tab-button.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    @media (max-width: 768px) {
      .grid[style*="grid-template-columns: 1fr 1fr"] {
        grid-template-columns: 1fr !important;
      }

      div[style*="grid-template-columns: repeat(3, 1fr)"] {
        grid-template-columns: 1fr !important;
      }
    }
  </style>

  <script>
    function showTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active class from all buttons
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(tabName).classList.add('active');
      
      // Add active class to clicked button
      event.target.classList.add('active');
    }
  </script>
</body>
</html>
